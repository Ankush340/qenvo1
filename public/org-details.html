<!DOCTYPE html>
<html lang="en">

<head>
    <title>Organization Details</title>
    <link rel="stylesheet" href="style/project.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script>
        function showPrev(fileRef, prevRef) {
            const [file] = fileRef.files
            if (file) {
                prev.src = URL.createObjectURL(file)
            }
        }
        $(document).ready(function () {
            $("#ajaxsearch").click(function () {

                let obj = {
                    type: "get",
                    url: "/get-one",
                    data: {
                        emailid: $("#txtEmail3").val()
                    }
                }


                $.ajax(obj).then(
                    function (responseJsonAry) {
                        //alert(  JSON.stringify(responseJsonAry) )
                        let orgname = responseJsonAry[0].orgname;
                        let regnumber = responseJsonAry[0].regnumber;
                        let address = responseJsonAry[0].address;
                        let city = responseJsonAry[0].city;
                        let sports = responseJsonAry[0].sports;
                        let website = responseJsonAry[0].website;
                        let insta = responseJsonAry[0].insta;
                        let head = responseJsonAry[0].head;
                        let contact = responseJsonAry[0].contact;
                        let otherinfo = responseJsonAry[0].otherinfo;
                        let picurl = responseJsonAry[0].picurl;


                        $("#txtorgname").val(orgname);
                        $("#txtrn").val(regnumber);
                        $("#txtaddress").val(address);
                        $("#txtcity").val(city);
                        $("#txtsports").val(sports);
                        $("#urlweb").val(website);
                        $("#urlinsta").val(insta);
                        $("#txtorghead").val(head);
                        $("#contactn").val(contact);
                        $("#otherinfo").val(otherinfo);
                        $("#prev").prop("src", picurl);

                        $("#hdn").val(picurl);

                    }).fail(function (err) { alert(err.message) })
            })
        });
    </script>
    <script>
        function doshw() {
            let ActuveUser = localStorage.getItem("UserActive");
            document.getElementById("txtEmail3").value = ActuveUser;
        }
    </script>
</head>

<body onload="doshw();">
    <nav class="navbar navbar-light  shadow-sm px-4" style="background-color: rgb(88, 217, 252);">
        <a class="navbar-brand d-flex align-items-center" href="#">
            <img src="pics/newlogo.png" alt="logo" style="width: 50px;height: 50px;background-size: contain;">
            <h4 style="margin-left: 20px;font-size: 35px;">Qenvo</h4>
        </a>
    </nav>
    <div class="container mt-4">
        <div class="row ">
            <div class="col-md-8 offset-md-2 bg-info">
                <center>
                    <h2> Event Organizer Account </h2>
                </center>
            </div>
        </div>
        <div class="container mt-4 ">
            <div class="bordered-box bg-light shadow-lg p-3 mb-5 bg-body-tertiary rounded">
                <form action="/do-sendserver" method="post" enctype="multipart/form-data">
                    <input type="hidden" id="hdn" name="hdn">
                    <div class="row">
                        <div class="col-md-8">
                            <label class="form-label">Email ID</label>
                            <input type="email" class="form-control" placeholder="Enter email" name="txtEmail3"
                                id="txtEmail3">
                        </div>
                        <div class="col-md-4 d-flex align-items-end">
                            <button type="button" class="btn btn-search" id="ajaxsearch">Search</button>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <label class="form-label">Org. Name</label>
                            <input type="text" class="form-control" placeholder="Organization Name" id="txtorgname"
                                name="txtorgname">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Registration Number</label>
                            <input type="text" class="form-control" placeholder="Registration Number" id="txtrn"
                                name="txtrn">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <label class="form-label">Address</label>
                            <input type="text" class="form-control" placeholder="Address" id="txtaddress"
                                name="txtaddress">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">City</label>
                            <input type="text" class="form-control" placeholder="City" id="txtcity" name="txtcity">
                        </div>
                    </div>

                    <label class="form-label">Deals in Sports</label>
                    <input type="text" class="form-control" placeholder="e.g. Football, Cricket" id="txtsports"
                        name="txtsports">

                    <div class="row">
                        <div class="col-md-6">
                            <label class="form-label">Website</label>
                            <input type="url" class="form-control" placeholder="Website URL" id="urlweb" name="urlweb">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Insta Link</label>
                            <input type="url" class="form-control" placeholder="Instagram Link" id="urlinsta"
                                name="urlinsta">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <label class="form-label">Org. Head</label>
                            <input type="text" class="form-control" placeholder="Name of Head" id="txtorghead"
                                name="txtorghead">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Contact Number</label>
                            <input type="tel" class="form-control" placeholder="Contact Number" id="contactn"
                                name="contactn">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <label class="form-label">Registration Certificate Pic</label>
                            <input type="file" class="form-control" id="filepic" name="filepic"
                                onchange="showPrev(filepic,prev)">
                        </div>
                        <div class="col-md-2 d-flex align-items-end">
                            <img src="pics/waiting.gif" width="100" height="100" id="prev" alt="">
                        </div>
                        <div>

                        </div>
                    </div>

                    <label class="form-label mt-3">Other Information</label>
                    <textarea class="form-control" rows="3" placeholder="Any additional info..." id="otherinfo"
                        name="otherinfo"></textarea>

                    <div class="mt-4 text-center">
                        <button type="submit" class="btn btn-custom" id="ajaxsendserver"
                            formaction="/do-sendserver">Send to Server</button>
                        <button type="submit" class="btn btn-custom" id="ajaxmodify"
                            formaction="/update-user">Modify</button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</body>

</html>